#!/bin/sh
set -e

echo "ðŸ¦€ pre-commit: gofmt..."
unformatted=$(gofmt -l .)
if [ -n "$unformatted" ]; then
  echo "Files not formatted (run 'gofmt -w .'):"
  echo "$unformatted"
  exit 1
fi

echo "ðŸ¦€ pre-commit: go vet..."
go vet ./...

echo "ðŸ¦€ pre-commit: go test..."
go test ./... -count=1 -timeout=30s

echo "ðŸ¦€ PINCH! All checks passed."
